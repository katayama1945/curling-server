<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8">
  <title>カーリング ロビー</title>
  <script src="/socket.io/socket.io.js"></script>
  <style>
    body { font-family: sans-serif; padding: 20px; }
    #waitingUsers button { display: block; margin: 5px 0; }
  </style>
</head>
<body>

  <!-- 画面1：対戦募集 -->
  <div id="screen1" class="screen active">
    <h2>カーリング対戦者 募集中</h2>
    <label>あなたの名前：</label>
    <input type="text" id="hostName">
    <button onclick="startHost()">対戦を募集する</button>
  </div>

  <!-- 画面2：待機中（参加者入力） -->
  <div id="screen2" class="screen">
    <h2 id="waitingMsg">○○さんが対戦者を募集しています！</h2>
    <label>あなたの名前（参加者）：</label>
    <input type="text" id="guestName">
    <button onclick="joinGame()">対戦に申し込む</button>
  </div>

  <!-- 画面3：対戦成立 -->
  <div id="screen3" class="screen">
    <h2>対戦成立！</h2>
    <p id="matchInfo">○○さん vs △△さん</p>
    <p>ゲームを開始します...</p>
  </div>
  <style>
    .screen {
    display: none;
    }
    .screen.active {
    display: block;
    }

  </style>
  <script>
    let host = '';
    let guest = '';

    function switchScreen(id) {
      document.querySelectorAll('.screen').forEach(div => div.classList.remove('active'));
      document.getElementById(id).classList.add('active');
    }

    function startHost() {
      host = document.getElementById('hostName').value.trim();
      if (!host) {
        alert("名前を入力してください");
        return;
      }
      document.getElementById('waitingMsg').textContent = `${host} さんが対戦者を募集しています！`;
      switchScreen('screen2');
    }

    function joinGame() {
      guest = document.getElementById('guestName').value.trim();
      if (!guest) {
        alert("名前を入力してください");
        return;
      }
      document.getElementById('matchInfo').textContent = `${host} さん vs ${guest} さん`;
      switchScreen('screen3');

      // 数秒後に curling.html に遷移（名前をURLパラメータで渡す）
      setTimeout(() => {
        window.location.href = `curling.html?host=${encodeURIComponent(host)}&guest=${encodeURIComponent(guest)}`;
      }, 2000);
    }
  </script>
</body>
</html>
